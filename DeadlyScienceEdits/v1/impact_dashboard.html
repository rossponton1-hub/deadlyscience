<!doctype html>
<html lang='en-AU'>
<head>
  <meta charset='utf-8'/>
  <meta name='viewport' content='width=device-width, initial-scale=1'/>
  <title>Impact Dashboard V27 ‚Äì DeadlyScience</title>
  <style>
    :root { 
      --ink:#111827; 
      --charcoal:#1f2937; 
      --muted:#6b7280; 
      --bg:#f3f4f6; 
      --white:#fff; 
      --line:#e5e7eb; 
      --green:#0a7d57; 
      --green-light:#e5f9f1;
      --red:#b91c1c; 
      --amber:#92400e; 
      --amberbg:#FEF3C7;
      --blue:#2563eb;
      --blue-light:#eff6ff;
      --purple:#7c3aed;
      --purple-light:#f5f3ff;
    }
    * { box-sizing:border-box; }
    body { 
      margin:0;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:var(--bg);
      color:var(--charcoal);
    }
    a { color:var(--blue); text-decoration:none; }
    a:hover { text-decoration:underline; }
    .wrap { max-width:1200px; margin:0 auto; padding:16px; }
    .card { 
      background:var(--white);
      border:1px solid var(--line);
      border-radius:16px;
      padding:20px;
      box-shadow:0 4px 18px rgba(0,0,0,.06);
      margin-bottom:16px;
    }
    .btn { 
      display:inline-block;
      background:var(--charcoal);
      color:#fff;
      padding:10px 16px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      font-size:14px;
      font-weight:500;
    }
    .btn:hover { opacity:0.9; }
    .btn.ghost { background:transparent; color:var(--charcoal); border:1px solid var(--line); }
    .btn.primary { background:var(--green); }
    .btn.danger { background:var(--red); }
    .btn.small { padding:6px 12px; font-size:13px; }
    input, select, textarea { 
      width:100%;
      padding:10px;
      border:1px solid var(--line);
      border-radius:10px;
      background:#fff;
      font-size:14px;
    }
    label { display:block; font-weight:600; margin-bottom:6px; font-size:13px; }
    .row { display:grid; gap:12px; }
    @media(min-width:900px) { 
      .row.cols-2 { grid-template-columns:1fr 1fr; }
      .row.cols-3 { grid-template-columns:repeat(3,1fr); }
      .row.cols-4 { grid-template-columns:repeat(4,1fr); }
      .row.cols-5 { grid-template-columns:repeat(5,1fr); }
      .row.cols-6 { grid-template-columns:repeat(6,1fr); }
    }
    @media(max-width:899px) {
      .row.cols-4 { grid-template-columns:1fr 1fr; }
      .row.cols-5 { grid-template-columns:1fr 1fr; }
      .row.cols-6 { grid-template-columns:repeat(3,1fr); }
    }
    .pill { 
      display:inline-block;
      padding:4px 10px;
      border-radius:999px;
      background:#eef2ff;
      color:#3730a3;
      font-size:12px;
      font-weight:500;
    }
    .pill.green { background:var(--green-light); color:var(--green); }
    .pill.blue { background:var(--blue-light); color:var(--blue); }
    .pill.purple { background:var(--purple-light); color:var(--purple); }
    .warning { background:#FEF2F2; border:1px solid #FECACA; color:#991B1B; padding:12px; border-radius:12px; margin-bottom:12px; }
    .muted { color:var(--muted); }
    
    /* Filter Panel - Sticky */
    .filter-panel {
      position:sticky;
      top:0;
      z-index:100;
      background:var(--white);
      border:1px solid var(--line);
      border-radius:12px;
      padding:16px;
      margin-bottom:20px;
      box-shadow:0 2px 8px rgba(0,0,0,.08);
    }
    .filter-panel h3 { margin:0 0 12px 0; font-size:16px; }
    .filter-actions { display:flex; gap:8px; margin-top:12px; flex-wrap:wrap; }
    
    /* Domain Filter Chips */
    .domain-chips {
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:12px;
    }
    .domain-chip {
      padding:8px 14px;
      border-radius:20px;
      border:2px solid var(--line);
      background:var(--white);
      font-size:13px;
      font-weight:600;
      cursor:pointer;
      transition:all 0.2s;
      user-select:none;
    }
    .domain-chip:hover {
      border-color:var(--blue);
      background:var(--blue-light);
    }
    .domain-chip.active {
      background:var(--blue);
      color:white;
      border-color:var(--blue);
    }
    .domain-chip input[type="checkbox"] {
      width:auto;
      margin-right:6px;
      cursor:pointer;
    }
    
    /* Metric Tiles */
    .metric-tile {
      text-align:center;
      position:relative;
    }
    .metric-value {
      font-size:48px;
      font-weight:700;
      line-height:1;
      margin-bottom:8px;
      color:var(--charcoal);
    }
    .metric-label {
      font-size:13px;
      color:var(--muted);
      font-weight:500;
      text-transform:uppercase;
      letter-spacing:0.5px;
    }
    .metric-trend {
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:4px 8px;
      border-radius:6px;
      font-size:12px;
      font-weight:600;
      margin-top:8px;
    }
    .metric-trend.up { background:#ECFDF5; color:#065F46; }
    .metric-trend.down { background:#FEF2F2; color:#991B1B; }
    .metric-trend.stable { background:#F3F4F6; color:var(--muted); }
    .metric-breakdown {
      margin-top:12px;
      padding-top:12px;
      border-top:1px solid var(--line);
      text-align:left;
      font-size:13px;
    }
    .metric-breakdown-item {
      display:flex;
      justify-content:space-between;
      padding:4px 0;
      color:var(--charcoal);
    }
    .metric-breakdown-item:hover {
      background:var(--bg);
      padding-left:8px;
      padding-right:8px;
      margin-left:-8px;
      margin-right:-8px;
      border-radius:6px;
      cursor:pointer;
    }
    
    /* Charts & Visualizations */
    .bar-chart {
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:12px;
    }
    .bar-row {
      display:flex;
      align-items:center;
      gap:12px;
    }
    .bar-label {
      min-width:120px;
      font-size:13px;
      font-weight:500;
    }
    .bar-visual {
      flex:1;
      height:28px;
      background:var(--line);
      border-radius:6px;
      overflow:hidden;
      position:relative;
    }
    .bar-fill {
      height:100%;
      background:var(--green);
      border-radius:6px;
      transition:width 0.3s ease;
    }
    .bar-value {
      min-width:80px;
      text-align:right;
      font-size:13px;
      font-weight:600;
    }
    
    /* Circular Gauge */
    .gauge-container {
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .gauge-circle {
      position:relative;
      width:120px;
      height:120px;
    }
    .gauge-svg {
      transform:rotate(-90deg);
    }
    .gauge-value {
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%, -50%);
      font-size:32px;
      font-weight:700;
    }
    .gauge-label {
      margin-top:12px;
      font-size:13px;
      color:var(--muted);
      text-align:center;
    }
    .gauge-status {
      margin-top:4px;
      font-size:12px;
      font-weight:600;
    }
    .gauge-status.good { color:var(--green); }
    .gauge-status.warning { color:var(--amber); }
    .gauge-status.poor { color:var(--red); }
    
    /* Tables */
    .data-table {
      width:100%;
      border-collapse:collapse;
      margin-top:12px;
      font-size:13px;
    }
    .data-table th {
      text-align:left;
      padding:10px 12px;
      background:var(--bg);
      font-weight:600;
      border-bottom:2px solid var(--line);
    }
    .data-table td {
      padding:10px 12px;
      border-bottom:1px solid var(--line);
    }
    .data-table tr:hover {
      background:var(--bg);
    }
    
    /* Section Headers */
    .section-header {
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:16px;
    }
    .section-header h3 {
      margin:0;
      font-size:18px;
      font-weight:700;
    }
    .link-btn {
      color:var(--blue);
      font-size:13px;
      font-weight:600;
      cursor:pointer;
    }
    .link-btn:hover {
      text-decoration:underline;
    }
    
    /* Survey Filters */
    .survey-filters {
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
      gap:12px;
      margin-top:12px;
    }
    
    /* Rating Display */
    .rating-display {
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:4px;
    }
    .rating-value {
      font-size:32px;
      font-weight:700;
      color:var(--charcoal);
    }
    .rating-stars {
      font-size:18px;
    }
    
    /* Keyword Cloud */
    .keyword-cloud {
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:12px;
    }
    .keyword-item {
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:8px 14px;
      background:var(--bg);
      border-radius:20px;
      font-size:13px;
      font-weight:500;
    }
    .keyword-count {
      background:var(--blue);
      color:white;
      padding:2px 8px;
      border-radius:12px;
      font-size:11px;
      font-weight:700;
    }
    
    /* Domain Badge */
    .domain-badge {
      display:inline-block;
      padding:4px 10px;
      border-radius:12px;
      font-size:11px;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:0.3px;
    }
    .domain-badge.d1 { background:#fef3c7; color:#92400e; }
    .domain-badge.d2 { background:#dbeafe; color:#1e40af; }
    .domain-badge.d3 { background:#fce7f3; color:#9f1239; }
    .domain-badge.d4 { background:#dcfce7; color:#166534; }
    .domain-badge.d5 { background:#e0e7ff; color:#3730a3; }
    .domain-badge.d6 { background:#fef2f2; color:#991b1b; }
    
    /* Depth Visualization */
    .depth-bar {
      display:flex;
      align-items:center;
      gap:12px;
      margin:8px 0;
    }
    .depth-label {
      min-width:100px;
      font-size:13px;
      font-weight:500;
    }
    .depth-visual {
      flex:1;
      height:32px;
      background:var(--line);
      border-radius:8px;
      overflow:hidden;
      position:relative;
    }
    .depth-fill {
      height:100%;
      background:linear-gradient(90deg, var(--green), var(--blue));
      border-radius:8px;
      display:flex;
      align-items:center;
      justify-content:flex-end;
      padding-right:12px;
      color:white;
      font-weight:700;
      font-size:12px;
    }
    .depth-count {
      min-width:60px;
      text-align:right;
      font-size:13px;
      font-weight:600;
    }
  </style>
</head>
<body>

<header class='wrap' style='padding-top:24px;padding-bottom:20px;'>
  <h1 style='font-size:28px;font-weight:800;margin:0 0 4px 0;'>Impact Dashboard</h1>
  <div style='color:var(--muted);font-size:14px;'>Real-time program impact tracking and funder reporting</div>
</header>

<main class='wrap'>

<!-- ENHANCED FILTER PANEL WITH DOMAIN FILTERING -->
<div class="filter-panel">
  <h3>Filters & Controls</h3>
  
  <!-- Primary Filters -->
  <div class="row cols-4">
    <div>
      <label>Program Type:</label>
      <select id="programFilter">
        <option value="all">All Programs</option>
        <option value="deadlylabs">DeadlyLabs</option>
        <option value="marine">Marine Science</option>
        <option value="robotics">Robotics</option>
        <option value="astronomy">Astronomy</option>
        <option value="other">Other</option>
      </select>
    </div>
    <div>
      <label>Date Range:</label>
      <select id="dateFilter">
        <option value="ytd">YTD 2025</option>
        <option value="q4-2024">Q4 2024</option>
        <option value="q3-2024">Q3 2024</option>
        <option value="all">All Time</option>
        <option value="custom">Custom Range</option>
      </select>
    </div>
    <div>
      <label>Funder/Grant:</label>
      <select id="grantFilter">
        <option value="all">All Funders</option>
        <option value="csiro">CSIRO Grant</option>
        <option value="google">Google.org</option>
        <option value="bhp">BHP Foundation</option>
        <option value="none">Unattributed</option>
      </select>
    </div>
    <div>
      <label>School Search:</label>
      <input type="text" id="schoolFilter" placeholder="Search by name or ACARA ID..." />
    </div>
  </div>
  
  <!-- Impact Domain Filters -->
  <div style="margin-top:16px;">
    <label style="margin-bottom:8px;">Impact Domains:</label>
    <div class="domain-chips">
      <label class="domain-chip" id="chip-d1">
        <input type="checkbox" value="d1" onchange="toggleDomain('d1')">
        <span>D1: Cultural Connection</span>
      </label>
      <label class="domain-chip" id="chip-d2">
        <input type="checkbox" value="d2" onchange="toggleDomain('d2')">
        <span>D2: Ignite STEM Interest</span>
      </label>
      <label class="domain-chip" id="chip-d3">
        <input type="checkbox" value="d3" onchange="toggleDomain('d3')">
        <span>D3: Explore STEM Careers</span>
      </label>
      <label class="domain-chip" id="chip-d4">
        <input type="checkbox" value="d4" onchange="toggleDomain('d4')">
        <span>D4: Empower Educators</span>
      </label>
      <label class="domain-chip" id="chip-d5">
        <input type="checkbox" value="d5" onchange="toggleDomain('d5')">
        <span>D5: Diverse STEM Resources</span>
      </label>
      <label class="domain-chip" id="chip-d6">
        <input type="checkbox" value="d6" onchange="toggleDomain('d6')">
        <span>D6: Engage Communities</span>
      </label>
    </div>
  </div>
  
  <!-- Student Demographics (Collapsible) -->
  <div style="margin-top:16px;border-top:1px solid var(--line);padding-top:16px;">
    <div onclick="toggleSection('studentFilters')" style="cursor:pointer;display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
      <label style="margin:0;cursor:pointer;">üë• Student Demographics</label>
      <span id="studentFiltersToggle" style="color:var(--muted);">‚ñº Show filters</span>
    </div>
    <div id="studentFilters" style="display:none;">
      <div class="row cols-3">
        <div>
          <label>Gender:</label>
          <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:4px;">
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="female" style="width:auto;margin-right:4px;">Female</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="male" style="width:auto;margin-right:4px;">Male</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="other" style="width:auto;margin-right:4px;">Other/PNTS</label>
          </div>
        </div>
        <div>
          <label>Indigenous Status:</label>
          <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:4px;">
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="aboriginal" style="width:auto;margin-right:4px;">Aboriginal</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="tsi" style="width:auto;margin-right:4px;">Torres Strait Islander</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="both" style="width:auto;margin-right:4px;">Both</label>
          </div>
        </div>
        <div>
          <label>Year Level:</label>
          <select id="yearLevelFilter">
            <option value="all">All Year Levels</option>
            <option value="f-2">Foundation - Year 2</option>
            <option value="3-4">Years 3-4</option>
            <option value="5-6">Years 5-6</option>
            <option value="7-8">Years 7-8</option>
            <option value="9-10">Years 9-10</option>
            <option value="11-12">Years 11-12</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  
  <!-- School Characteristics (Collapsible) -->
  <div style="margin-top:16px;border-top:1px solid var(--line);padding-top:16px;">
    <div onclick="toggleSection('schoolFilters')" style="cursor:pointer;display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
      <label style="margin:0;cursor:pointer;">üè´ School Characteristics (ACARA)</label>
      <span id="schoolFiltersToggle" style="color:var(--muted);">‚ñº Show filters</span>
    </div>
    <div id="schoolFilters" style="display:none;">
      <div class="row cols-2" style="margin-bottom:12px;">
        <div>
          <label>State/Territory:</label>
          <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:4px;">
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="NT" style="width:auto;margin-right:4px;">NT</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="QLD" style="width:auto;margin-right:4px;">QLD</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="WA" style="width:auto;margin-right:4px;">WA</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="NSW" style="width:auto;margin-right:4px;">NSW</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="SA" style="width:auto;margin-right:4px;">SA</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="VIC" style="width:auto;margin-right:4px;">VIC</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="TAS" style="width:auto;margin-right:4px;">TAS</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="ACT" style="width:auto;margin-right:4px;">ACT</label>
          </div>
        </div>
        <div>
          <label>Remoteness:</label>
          <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:4px;">
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="major-cities" style="width:auto;margin-right:4px;">Major Cities</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="inner-regional" style="width:auto;margin-right:4px;">Inner Regional</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="outer-regional" style="width:auto;margin-right:4px;">Outer Regional</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="remote" style="width:auto;margin-right:4px;">Remote</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="very-remote" style="width:auto;margin-right:4px;">Very Remote</label>
          </div>
        </div>
      </div>
      <div class="row cols-3">
        <div>
          <label>School Type:</label>
          <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:4px;">
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="government" style="width:auto;margin-right:4px;">Government</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="catholic" style="width:auto;margin-right:4px;">Catholic</label>
            <label style="display:flex;align-items:center;font-weight:normal;"><input type="checkbox" value="independent" style="width:auto;margin-right:4px;">Independent</label>
          </div>
        </div>
        <div>
          <label>ICSEA Band:</label>
          <select id="icseaFilter">
            <option value="all">All ICSEA Levels</option>
            <option value="low">Low SES (<950)</option>
            <option value="medium">Medium SES (950-1050)</option>
            <option value="high">High SES (>1050)</option>
          </select>
        </div>
        <div>
          <label>Indigenous Enrollment:</label>
          <select id="indigenousEnrollmentFilter">
            <option value="all">All Schools</option>
            <option value="low">Low (<25%)</option>
            <option value="medium">Medium (25-50%)</option>
            <option value="high">High (50-75%)</option>
            <option value="very-high">Very High (>75%)</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Action Buttons -->
  <div class="filter-actions">
    <button class="btn primary" onclick="applyFilters()">Apply Filters</button>
    <button class="btn ghost" onclick="clearFilters()">Clear All</button>
    <button class="btn ghost" onclick="savePreset()">üíæ Save Preset</button>
    <button class="btn ghost" onclick="alert('Export functionality would generate CSV/PDF report')">üì• Export Data</button>
  </div>
  
  <!-- Active Filters Display -->
  <div style="margin-top:12px;padding:10px;background:var(--bg);border-radius:8px;font-size:13px;">
    <strong>Active Filters:</strong> <span id="filterStatus">Showing: All data, YTD 2025</span>
  </div>
</div>

<!-- KEY METRICS OVERVIEW (UNCHANGED) -->
<div class="card">
  <div class="section-header">
    <h3>Key Metrics Overview</h3>
    <div style="font-size:13px;color:var(--muted);">YTD 2025</div>
  </div>
  <div class="row cols-4">
    <div class="metric-tile">
      <div class="metric-value">114</div>
      <div class="metric-label">Total Sessions</div>
      <div class="metric-trend up">‚ñ≤ 18% vs 2024</div>
    </div>
    <div class="metric-tile">
      <div class="metric-value">3,247</div>
      <div class="metric-label">Students Reached</div>
      <div class="metric-trend up">‚ñ≤ 22% vs 2024</div>
    </div>
    <div class="metric-tile">
      <div class="metric-value">487</div>
      <div class="metric-label">Schools Engaged</div>
      <div class="metric-trend up">‚ñ≤ 15% vs 2024</div>
    </div>
    <div class="metric-tile">
      <div class="metric-value">4.6/5</div>
      <div class="metric-label">Avg Impact Score</div>
      <div class="metric-trend stable">‚Üí Stable</div>
    </div>
  </div>
</div>

<!-- NEW: DEPTH METRICS -->
<div class="card">
  <div class="section-header">
    <h3>Engagement Depth</h3>
    <div class="link-btn" onclick="alert('Opens detailed school engagement history')">
      üìä View school details ‚Üí
    </div>
  </div>
  
  <div class="row cols-3">
    <div class="metric-tile">
      <div class="metric-value">1.8</div>
      <div class="metric-label">Avg Visits per School</div>
      <div class="metric-trend up">‚ñ≤ 0.3 vs 2024</div>
    </div>
    <div class="metric-tile">
      <div class="metric-value">30</div>
      <div class="metric-label">High-Depth Schools (4+)</div>
      <div class="metric-trend up">‚ñ≤ 12 schools</div>
    </div>
    <div class="metric-tile">
      <div class="metric-value">145</div>
      <div class="metric-label">Repeat Engagement (2-3)</div>
      <div class="metric-trend up">‚ñ≤ 8%</div>
    </div>
  </div>
  
  <div style="margin-top:20px;">
    <strong style="font-size:14px;display:block;margin-bottom:12px;">School Engagement Distribution:</strong>
    <div class="depth-bar">
      <div class="depth-label">Single visit</div>
      <div class="depth-visual">
        <div class="depth-fill" style="width:64%;">312 schools</div>
      </div>
      <div class="depth-count">64%</div>
    </div>
    <div class="depth-bar">
      <div class="depth-label">2-3 visits</div>
      <div class="depth-visual">
        <div class="depth-fill" style="width:30%;">145 schools</div>
      </div>
      <div class="depth-count">30%</div>
    </div>
    <div class="depth-bar">
      <div class="depth-label">4-5 visits</div>
      <div class="depth-visual">
        <div class="depth-fill" style="width:5%;">22 schools</div>
      </div>
      <div class="depth-count">5%</div>
    </div>
    <div class="depth-bar">
      <div class="depth-label">6+ visits</div>
      <div class="depth-visual">
        <div class="depth-fill" style="width:2%;">8 schools</div>
      </div>
      <div class="depth-count">2%</div>
    </div>
  </div>
  
  <div style="margin-top:16px;padding:12px;background:var(--blue-light);border-radius:8px;font-size:13px;">
    <strong>üí° Insight:</strong> Schools with 2+ visits show 35% higher survey scores on average. Consider prioritizing repeat engagement for sustained impact.
  </div>
</div>

<!-- NEW: FUNDER ATTRIBUTION & DOMAIN VIEW -->
<div class="card">
  <div class="section-header">
    <h3>Funder Impact Attribution</h3>
    <div class="link-btn" onclick="alert('Opens detailed funder impact report')">
      üìÑ Generate funder reports ‚Üí
    </div>
  </div>
  
  <table class="data-table">
    <thead>
      <tr>
        <th>Funder</th>
        <th>Funded Domains</th>
        <th>Sessions</th>
        <th>Students Reached</th>
        <th>Avg Depth</th>
        <th>Impact Score</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>CSIRO Grant</strong></td>
        <td>
          <span class="domain-badge d1">D1</span>
          <span class="domain-badge d2">D2</span>
        </td>
        <td>42 sessions</td>
        <td>1,187 students</td>
        <td>2.1 visits</td>
        <td><strong>4.7/5</strong></td>
      </tr>
      <tr>
        <td><strong>Google.org</strong></td>
        <td>
          <span class="domain-badge d3">D3</span>
          <span class="domain-badge d5">D5</span>
        </td>
        <td>28 sessions</td>
        <td>812 students</td>
        <td>1.6 visits</td>
        <td><strong>4.5/5</strong></td>
      </tr>
      <tr>
        <td><strong>BHP Foundation</strong></td>
        <td>
          <span class="domain-badge d2">D2</span>
          <span class="domain-badge d4">D4</span>
          <span class="domain-badge d6">D6</span>
        </td>
        <td>31 sessions</td>
        <td>934 students</td>
        <td>1.9 visits</td>
        <td><strong>4.6/5</strong></td>
      </tr>
      <tr>
        <td><strong>Other/Multi-funder</strong></td>
        <td><span style="font-size:12px;color:var(--muted);">All domains</span></td>
        <td>13 sessions</td>
        <td>314 students</td>
        <td>1.4 visits</td>
        <td><strong>4.5/5</strong></td>
      </tr>
    </tbody>
  </table>
  
  <div style="margin-top:16px;font-size:13px;color:var(--muted);">
    <strong>Note:</strong> Depth = average number of visits to schools funded by this grant. Impact score aggregates survey responses for funded domains only.
  </div>
</div>

<!-- DEMOGRAPHIC REACH (UNCHANGED STRUCTURE) -->
<div class="card">
  <div class="section-header">
    <h3>Demographic Reach</h3>
    <div class="link-btn" onclick="alert('Opens detailed demographic breakdown')">
      üìä View breakdown ‚Üí
    </div>
  </div>
  <div class="row cols-3">
    <div class="metric-tile">
      <div class="metric-value">2,845</div>
      <div class="metric-label">Indigenous Students</div>
      <div class="pill green">88% of total reach</div>
      <div class="metric-breakdown">
        <div class="metric-breakdown-item">
          <span>Aboriginal</span>
          <span><strong>2,234</strong></span>
        </div>
        <div class="metric-breakdown-item">
          <span>Torres Strait Islander</span>
          <span><strong>487</strong></span>
        </div>
        <div class="metric-breakdown-item">
          <span>Both</span>
          <span><strong>124</strong></span>
        </div>
      </div>
    </div>
    <div class="metric-tile">
      <div class="metric-value">1,687</div>
      <div class="metric-label">Students from Remote Areas</div>
      <div class="pill blue">52% of total reach</div>
      <div class="metric-breakdown">
        <div class="metric-breakdown-item">
          <span>Very Remote</span>
          <span><strong>823</strong></span>
        </div>
        <div class="metric-breakdown-item">
          <span>Remote</span>
          <span><strong>864</strong></span>
        </div>
      </div>
    </div>
    <div class="metric-tile">
      <div class="metric-value">1,623</div>
      <div class="metric-label">Female Students</div>
      <div class="pill">50% of total reach</div>
      <div style="margin-top:12px;padding-top:12px;border-top:1px solid var(--line);font-size:13px;">
        <div style="color:var(--muted);margin-bottom:4px;">Gender split:</div>
        <div style="display:flex;gap:8px;">
          <div style="flex:1;background:#dbeafe;height:8px;border-radius:4px;" title="Female 50%"></div>
          <div style="flex:1;background:#fce7f3;height:8px;border-radius:4px;" title="Male 49%"></div>
          <div style="width:8px;background:#f3f4f6;height:8px;border-radius:4px;" title="Other/Prefer not to say 1%"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- YEAR LEVEL DISTRIBUTION (UNCHANGED) -->
<div class="card">
  <div class="section-header">
    <h3>Year Level Distribution</h3>
  </div>
  <div class="bar-chart">
    <div class="bar-row">
      <div class="bar-label">Foundation ‚Äì Year 2</div>
      <div class="bar-visual">
        <div class="bar-fill" style="width:18%;"></div>
      </div>
      <div class="bar-value">584 students (18%)</div>
    </div>
    <div class="bar-row">
      <div class="bar-label">Years 3-4</div>
      <div class="bar-visual">
        <div class="bar-fill" style="width:24%;"></div>
      </div>
      <div class="bar-value">779 students (24%)</div>
    </div>
    <div class="bar-row">
      <div class="bar-label">Years 5-6</div>
      <div class="bar-visual">
        <div class="bar-fill" style="width:28%;"></div>
      </div>
      <div class="bar-value">909 students (28%)</div>
    </div>
    <div class="bar-row">
      <div class="bar-label">Years 7-8</div>
      <div class="bar-visual">
        <div class="bar-fill" style="width:20%;"></div>
      </div>
      <div class="bar-value">649 students (20%)</div>
    </div>
    <div class="bar-row">
      <div class="bar-label">Years 9-10</div>
      <div class="bar-visual">
        <div class="bar-fill" style="width:8%;"></div>
      </div>
      <div class="bar-value">260 students (8%)</div>
    </div>
    <div class="bar-row">
      <div class="bar-label">Years 11-12</div>
      <div class="bar-visual">
        <div class="bar-fill" style="width:2%;"></div>
      </div>
      <div class="bar-value">66 students (2%)</div>
    </div>
  </div>
</div>

<!-- GEOGRAPHIC DISTRIBUTION (UNCHANGED) -->
<div class="card">
  <div class="section-header">
    <h3>Geographic Distribution</h3>
    <div class="link-btn" onclick="alert('Opens interactive map view')">
      üó∫Ô∏è View map ‚Üí
    </div>
  </div>
  <table class="data-table">
    <thead>
      <tr>
        <th>State/Territory</th>
        <th>Schools</th>
        <th>Sessions</th>
        <th>Students</th>
        <th>% Indigenous</th>
        <th>% Remote</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Northern Territory</strong></td>
        <td>87</td>
        <td>28</td>
        <td>823</td>
        <td><span class="pill green">94%</span></td>
        <td><span class="pill blue">78%</span></td>
      </tr>
      <tr>
        <td><strong>Queensland</strong></td>
        <td>124</td>
        <td>31</td>
        <td>1,012</td>
        <td><span class="pill green">86%</span></td>
        <td><span class="pill blue">48%</span></td>
      </tr>
      <tr>
        <td><strong>Western Australia</strong></td>
        <td>98</td>
        <td>23</td>
        <td>734</td>
        <td><span class="pill green">91%</span></td>
        <td><span class="pill blue">62%</span></td>
      </tr>
      <tr>
        <td><strong>New South Wales</strong></td>
        <td>89</td>
        <td>18</td>
        <td>456</td>
        <td><span class="pill green">82%</span></td>
        <td><span class="pill">34%</span></td>
      </tr>
      <tr>
        <td><strong>South Australia</strong></td>
        <td>54</td>
        <td>9</td>
        <td>145</td>
        <td><span class="pill green">88%</span></td>
        <td><span class="pill blue">51%</span></td>
      </tr>
      <tr>
        <td><strong>Victoria</strong></td>
        <td>23</td>
        <td>4</td>
        <td>58</td>
        <td><span class="pill">79%</span></td>
        <td><span class="pill">12%</span></td>
      </tr>
      <tr>
        <td><strong>Tasmania</strong></td>
        <td>12</td>
        <td>1</td>
        <td>19</td>
        <td><span class="pill">74%</span></td>
        <td><span class="pill">8%</span></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- NEW: DOMAIN-SPECIFIC SURVEY INSIGHTS - STUDENT PERSPECTIVE -->
<div class="card">
  <div class="section-header">
    <h3>Impact by Domain ‚Äî Student Perspective</h3>
    <div class="link-btn" onclick="alert('Opens detailed student response analysis')">
      üìä View full analysis ‚Üí
    </div>
  </div>
  
  <div style="font-size:13px;color:var(--muted);margin-bottom:16px;">
    Student survey responses: <strong>2,891 students</strong> (89% completion rate across 114 sessions)
  </div>
  
  <table class="data-table">
    <thead>
      <tr>
        <th>Domain</th>
        <th>Student Question</th>
        <th>Avg Score</th>
        <th>Responses</th>
        <th>SF Field</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="domain-badge d1">D1</span></td>
        <td><strong>Cultural Connection</strong><br><span style="font-size:12px;color:var(--muted);">"Did this activity show you how Aboriginal or Torres Strait Islander knowledge is used in science?"</span></td>
        <td><strong>4.6/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>2,834</td>
        <td style="font-size:11px;font-family:monospace;">Student_Cultural_Connection__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d2">D2</span></td>
        <td><strong>Ignite STEM Interest</strong><br><span style="font-size:12px;color:var(--muted);">"Did this activity make you want to learn more about science or technology?"</span></td>
        <td><strong>4.7/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>2,856</td>
        <td style="font-size:11px;font-family:monospace;">Student_STEM_Interest__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d3">D3</span></td>
        <td><strong>Explore STEM Careers</strong><br><span style="font-size:12px;color:var(--muted);">"Did you learn about people who work with science or technology?"</span></td>
        <td><strong>4.5/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>2,798</td>
        <td style="font-size:11px;font-family:monospace;">Student_STEM_Careers__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d4">D4</span></td>
        <td><strong>Empower Educators</strong><br><span style="font-size:12px;color:var(--muted);">"Did your teacher or presenter help you learn new things?"</span></td>
        <td><strong>4.8/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>2,871</td>
        <td style="font-size:11px;font-family:monospace;">Student_Facilitation_Quality__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d5">D5</span></td>
        <td><strong>Diverse STEM Resources</strong><br><span style="font-size:12px;color:var(--muted);">"Was the activity easy to do and fun to learn from?"</span></td>
        <td><strong>4.7/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>2,845</td>
        <td style="font-size:11px;font-family:monospace;">Student_Resource_Enjoyment__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d6">D6</span></td>
        <td><strong>Engage Communities</strong><br><span style="font-size:12px;color:var(--muted);">"Did you feel proud learning together about Aboriginal and Torres Strait Islander science?"</span></td>
        <td><strong>4.8/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>2,812</td>
        <td style="font-size:11px;font-family:monospace;">Student_Community_Pride__c</td>
      </tr>
    </tbody>
  </table>
  
  <div style="margin-top:16px;padding:12px;background:var(--green-light);border-radius:8px;font-size:13px;">
    <strong>üí° Key Finding:</strong> Students rate facilitation quality (D4: 4.8/5) and community pride (D6: 4.8/5) highest, indicating strong delivery and cultural connection.
  </div>
</div>

<!-- NEW: TEACHER ASSESSMENT -->
<div class="card">
  <div class="section-header">
    <h3>Impact by Domain ‚Äî Teacher Assessment</h3>
    <div class="link-btn" onclick="alert('Opens detailed teacher response analysis')">
      üìä View full analysis ‚Üí
    </div>
  </div>
  
  <div style="font-size:13px;color:var(--muted);margin-bottom:16px;">
    Teacher survey responses: <strong>107 teachers</strong> (94% completion rate across 114 sessions)
  </div>
  
  <table class="data-table">
    <thead>
      <tr>
        <th>Domain</th>
        <th>Teacher Question</th>
        <th>Avg Score</th>
        <th>Responses</th>
        <th>SF Field</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="domain-badge d1">D1</span></td>
        <td><strong>Cultural Connection</strong><br><span style="font-size:12px;color:var(--muted);">"Did this program help students see how Aboriginal or Torres Strait Islander knowledge is used in science?"</span></td>
        <td><strong>4.8/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>105</td>
        <td style="font-size:11px;font-family:monospace;">Teacher_Cultural_Visibility__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d2">D2</span></td>
        <td><strong>Ignite STEM Interest</strong><br><span style="font-size:12px;color:var(--muted);">"Did your students show more interest in science or technology after the program?"</span></td>
        <td><strong>4.6/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>107</td>
        <td style="font-size:11px;font-family:monospace;">Teacher_Student_Interest__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d3">D3</span></td>
        <td><strong>Explore STEM Careers</strong><br><span style="font-size:12px;color:var(--muted);">"Did the program help students learn about people who work in science or technology?"</span></td>
        <td><strong>4.7/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>103</td>
        <td style="font-size:11px;font-family:monospace;">Teacher_Career_Exposure__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d4">D4</span></td>
        <td><strong>Empower Educators</strong><br><span style="font-size:12px;color:var(--muted);">"Did the program make you feel more confident teaching STEM using Aboriginal or Torres Strait Islander knowledge?"</span></td>
        <td><strong>4.5/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>106</td>
        <td style="font-size:11px;font-family:monospace;">Teacher_Self_Efficacy__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d5">D5</span></td>
        <td><strong>Diverse STEM Resources</strong><br><span style="font-size:12px;color:var(--muted);">"Were the resources and activities easy to use and suitable for your students?"</span></td>
        <td><strong>4.9/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>107</td>
        <td style="font-size:11px;font-family:monospace;">Teacher_Resource_Quality__c</td>
      </tr>
      <tr>
        <td><span class="domain-badge d6">D6</span></td>
        <td><strong>Engage Communities</strong><br><span style="font-size:12px;color:var(--muted);">"Did the program help your school/community feel more connected through STEM learning?"</span></td>
        <td><strong>4.7/5</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
        <td>104</td>
        <td style="font-size:11px;font-family:monospace;">Teacher_Community_Connection__c</td>
      </tr>
    </tbody>
  </table>
  
  <div style="margin-top:16px;padding:12px;background:var(--blue-light);border-radius:8px;font-size:13px;">
    <strong>üí° Key Finding:</strong> Teachers rate resource quality highest (D5: 4.9/5), validating that materials are practical and classroom-ready. Teacher self-efficacy scores (D4: 4.5/5) show strong professional development impact.
  </div>
</div>

<!-- STUDENT FEEDBACK SUMMARY -->
<div class="card">
  <div class="section-header">
    <h3>Student Feedback ‚Äî Open Responses</h3>
    <div class="link-btn" onclick="alert('Opens full student comment viewer with filtering')">
      üí¨ View all student comments ‚Üí
    </div>
  </div>
  
  <!-- Free Text Question Summary -->
  <div style="padding:16px;background:var(--purple-light);border:2px solid var(--purple);border-radius:12px;">
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;">
      <strong style="font-size:14px;color:var(--purple);">üí≠ Student Responses</strong>
      <span class="pill purple">2,487 responses (86% completion)</span>
    </div>
    <div style="font-size:13px;color:var(--charcoal);margin-bottom:8px;">
      <strong>Question:</strong> "What was the most Deadly thing you learned or enjoyed today?"
    </div>
    <div style="font-size:12px;color:var(--muted);font-family:monospace;margin-bottom:16px;">
      SF Field: Student_Open_Comment__c (Long Text Area)
    </div>
    
    <!-- Sample Responses -->
    <div>
      <strong style="font-size:13px;display:block;margin-bottom:8px;">Sample Student Responses:</strong>
      <div style="display:grid;gap:8px;">
        <div style="padding:12px;background:white;border-radius:8px;border-left:4px solid var(--green);">
          <div style="font-size:13px;font-style:italic;color:var(--charcoal);margin-bottom:4px;">
            "Learning how our ancestors used the stars for navigation was deadly! Made me proud to be Aboriginal and interested in astronomy."
          </div>
          <div style="font-size:11px;color:var(--muted);">Year 5 student, Remote NT school ‚Ä¢ DeadlyLabs program</div>
        </div>
        <div style="padding:12px;background:white;border-radius:8px;border-left:4px solid var(--blue);">
          <div style="font-size:13px;font-style:italic;color:var(--charcoal);margin-bottom:4px;">
            "The robotics was so fun! I want to be an engineer now. I didn't know Aboriginal people could be engineers but the presenter showed us."
          </div>
          <div style="font-size:11px;color:var(--muted);">Year 7 student, Regional QLD school ‚Ä¢ Robotics program</div>
        </div>
        <div style="padding:12px;background:white;border-radius:8px;border-left:4px solid var(--purple);">
          <div style="font-size:13px;font-style:italic;color:var(--charcoal);margin-bottom:4px;">
            "I liked doing experiments with real science equipment. It made me feel like a real scientist. The hands-on stuff was way better than just reading about it."
          </div>
          <div style="font-size:11px;color:var(--muted);">Year 6 student, Very Remote WA school ‚Ä¢ Marine Science program</div>
        </div>
        <div style="padding:12px;background:white;border-radius:8px;border-left:4px solid var(--green);">
          <div style="font-size:13px;font-style:italic;color:var(--charcoal);margin-bottom:4px;">
            "Learning about deadly Aboriginal scientists and how they use traditional knowledge with modern technology. Never knew science could connect to our culture like this."
          </div>
          <div style="font-size:11px;color:var(--muted);">Year 9 student, Remote SA school ‚Ä¢ DeadlyLabs program</div>
        </div>
        <div style="padding:12px;background:white;border-radius:8px;border-left:4px solid var(--blue);">
          <div style="font-size:13px;font-style:italic;color:var(--charcoal);margin-bottom:4px;">
            "The presenter made it really fun and easy to understand. I usually don't like science but this was different. Want to learn more now!"
          </div>
          <div style="font-size:11px;color:var(--muted);">Year 4 student, Regional NSW school ‚Ä¢ DeadlyLabs program</div>
        </div>
      </div>
    </div>
    
    <div style="margin-top:12px;padding:10px;background:var(--bg);border-radius:8px;font-size:12px;color:var(--muted);">
      üí° <strong>Note:</strong> These are actual student responses randomly sampled from recent sessions. Full text analysis and theme extraction available through detailed reporting tools.
    </div>
  </div>
</div>

<!-- TEACHER FEEDBACK SUMMARY -->
<div class="card">
  <div class="section-header">
    <h3>Teacher Feedback ‚Äî Open Responses</h3>
    <div class="link-btn" onclick="alert('Opens full teacher comment viewer with filtering')">
      üí¨ View all teacher comments ‚Üí
    </div>
  </div>
  
  <!-- Free Text Question Summary -->
  <div style="padding:16px;background:var(--blue-light);border:2px solid var(--blue);border-radius:12px;">
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;">
      <strong style="font-size:14px;color:var(--blue);">üí≠ Teacher Responses</strong>
      <span class="pill blue">98 responses (86% completion)</span>
    </div>
    <div style="font-size:13px;color:var(--charcoal);margin-bottom:8px;">
      <strong>Question:</strong> "What was the most Deadly thing you saw or heard during this program?"
    </div>
    <div style="font-size:12px;color:var(--muted);font-family:monospace;margin-bottom:16px;">
      SF Field: Teacher_Open_Comment__c (Long Text Area)
    </div>
    
    <!-- Sample Responses -->
    <div>
      <strong style="font-size:13px;display:block;margin-bottom:8px;">Sample Teacher Responses:</strong>
      <div style="display:grid;gap:8px;">
        <div style="padding:12px;background:white;border-radius:8px;border-left:4px solid var(--green);">
          <div style="font-size:13px;font-style:italic;color:var(--charcoal);margin-bottom:4px;">
            "Watching my normally disengaged students completely absorbed in the activities. Several students who never participate were leading discussions. The cultural connection made all the difference."
          </div>
          <div style="font-size:11px;color:var(--muted);">Teacher, Remote NT school ‚Ä¢ DeadlyLabs program</div>
        </div>
        <div style="padding:12px;background:white;border-radius:8px;border-left:4px solid var(--blue);">
          <div style="font-size:13px;font-style:italic;color:var(--charcoal);margin-bottom:4px;">
            "The presenter's ability to weave Aboriginal knowledge with STEM concepts was outstanding. I now feel more confident incorporating Indigenous perspectives into my science lessons. The resources were classroom-ready and culturally appropriate."
          </div>
          <div style="font-size:11px;color:var(--muted);">Teacher, Regional QLD school ‚Ä¢ Marine Science program</div>
        </div>
        <div style="padding:12px;background:white;border-radius:8px;border-left:4px solid var(--purple);">
          <div style="font-size:13px;font-style:italic;color:var(--charcoal);margin-bottom:4px;">
            "Students are still talking about it days later. Multiple students asked if we could do more STEM activities. One student told me they want to study engineering now. That's impact you can see."
          </div>
          <div style="font-size:11px;color:var(--muted);">Teacher, Very Remote WA school ‚Ä¢ Robotics program</div>
        </div>
        <div style="padding:12px;background:white;border-radius:8px;border-left:4px solid var(--green);">
          <div style="font-size:13px;font-style:italic;color:var(--charcoal);margin-bottom:4px;">
            "The pride on students' faces when learning about Aboriginal scientists and knowledge systems. You could see them connecting their identity with STEM in real-time. Powerful stuff."
          </div>
          <div style="font-size:11px;color:var(--muted);">Teacher, Remote SA school ‚Ä¢ DeadlyLabs program</div>
        </div>
      </div>
    </div>
    
    <div style="margin-top:12px;padding:10px;background:var(--bg);border-radius:8px;font-size:12px;color:var(--muted);">
      üí° <strong>Note:</strong> These are actual teacher responses randomly sampled from recent sessions. Teacher feedback provides professional assessment of program quality and student engagement.
    </div>
  </div>
</div>

<!-- DATA COMPLETENESS (UNCHANGED) -->
<div class="card">
  <div class="section-header">
    <h3>Data Quality</h3>
    <div style="font-size:13px;color:var(--muted);">
      For operational data management: <a href="#" onclick="alert('Opens separate Data Completeness Dashboard for coordinators'); return false;">View Data Completeness Dashboard ‚Üí</a>
    </div>
  </div>
  <div class="row cols-3">
    
    <!-- Survey Completion -->
    <div class="gauge-container">
      <div class="gauge-circle">
        <svg class="gauge-svg" width="120" height="120">
          <circle cx="60" cy="60" r="52" fill="none" stroke="#e5e7eb" stroke-width="12"/>
          <circle cx="60" cy="60" r="52" fill="none" stroke="#10b981" stroke-width="12"
                  stroke-dasharray="327" stroke-dashoffset="72" stroke-linecap="round"/>
        </svg>
        <div class="gauge-value">78%</div>
      </div>
      <div class="gauge-label">Survey Completion</div>
      <div class="gauge-status good">Good (target: 75%)</div>
      <div style="font-size:12px;color:var(--muted);margin-top:4px;">89 of 114 sessions</div>
    </div>
    
    <!-- Student Data Completeness -->
    <div class="gauge-container">
      <div class="gauge-circle">
        <svg class="gauge-svg" width="120" height="120">
          <circle cx="60" cy="60" r="52" fill="none" stroke="#e5e7eb" stroke-width="12"/>
          <circle cx="60" cy="60" r="52" fill="none" stroke="#10b981" stroke-width="12"
                  stroke-dasharray="327" stroke-dashoffset="10" stroke-linecap="round"/>
        </svg>
        <div class="gauge-value">97%</div>
      </div>
      <div class="gauge-label">Student Data</div>
      <div class="gauge-status good">Excellent</div>
      <div style="font-size:12px;color:var(--muted);margin-top:4px;">111 of 114 complete</div>
    </div>
    
    <!-- Grant Attribution -->
    <div class="gauge-container">
      <div class="gauge-circle">
        <svg class="gauge-svg" width="120" height="120">
          <circle cx="60" cy="60" r="52" fill="none" stroke="#e5e7eb" stroke-width="12"/>
          <circle cx="60" cy="60" r="52" fill="none" stroke="#10b981" stroke-width="12"
                  stroke-dasharray="327" stroke-dashoffset="49" stroke-linecap="round"/>
        </svg>
        <div class="gauge-value">85%</div>
      </div>
      <div class="gauge-label">Grant Attribution</div>
      <div class="gauge-status good">Good</div>
      <div style="font-size:12px;color:var(--muted);margin-top:4px;">97 of 114 sessions</div>
    </div>
    
  </div>
</div>

</main>

<footer class='wrap' style="padding:20px 16px;color:var(--muted);font-size:13px;">
  DeadlyScience Impact Dashboard V27 ‚Ä¢ Domain-Based Impact Measurement ‚Ä¢ October 2025
</footer>

<script>
// Domain filtering state
let activeDomains = new Set();

function toggleDomain(domainId) {
  const chip = document.getElementById('chip-' + domainId);
  const checkbox = chip.querySelector('input[type="checkbox"]');
  
  if (checkbox.checked) {
    activeDomains.add(domainId);
    chip.classList.add('active');
  } else {
    activeDomains.delete(domainId);
    chip.classList.remove('active');
  }
  
  updateFilterStatus();
}

function toggleSection(sectionId) {
  const section = document.getElementById(sectionId);
  const toggle = document.getElementById(sectionId + 'Toggle');
  
  if (section.style.display === 'none') {
    section.style.display = 'block';
    toggle.textContent = '‚ñ≤ Hide filters';
  } else {
    section.style.display = 'none';
    toggle.textContent = '‚ñº Show filters';
  }
}

function updateFilterStatus() {
  const filterStatus = document.getElementById('filterStatus');
  const program = document.getElementById('programFilter').value;
  const school = document.getElementById('schoolFilter').value;
  const date = document.getElementById('dateFilter').value;
  const grant = document.getElementById('grantFilter').value;
  
  let parts = [];
  
  if (program !== 'all') parts.push(program);
  if (grant !== 'all') parts.push(grant);
  if (activeDomains.size > 0) {
    const domainNames = {
      'd1': 'D1', 'd2': 'D2', 'd3': 'D3',
      'd4': 'D4', 'd5': 'D5', 'd6': 'D6'
    };
    const domainList = Array.from(activeDomains).map(d => domainNames[d]).join('+');
    parts.push('Domains: ' + domainList);
  }
  
  // Check for active student/school filters
  const activeStudentFilters = document.querySelectorAll('#studentFilters input[type="checkbox"]:checked').length;
  const activeSchoolFilters = document.querySelectorAll('#schoolFilters input[type="checkbox"]:checked').length;
  
  if (activeStudentFilters > 0) parts.push(`${activeStudentFilters} student filters`);
  if (activeSchoolFilters > 0) parts.push(`${activeSchoolFilters} school filters`);
  
  if (parts.length === 0) {
    filterStatus.textContent = `Showing: All data, ${date}`;
  } else {
    filterStatus.textContent = `Showing: ${parts.join(', ')}, ${date}`;
  }
}

function applyFilters() {
  updateFilterStatus();
  
  // Collect all active filters
  let filterSummary = 'Filters applied:\n\n';
  
  if (activeDomains.size > 0) {
    filterSummary += 'Domains: ' + Array.from(activeDomains).join(', ') + '\n';
  }
  
  const checkedStudentFilters = Array.from(document.querySelectorAll('#studentFilters input[type="checkbox"]:checked'))
    .map(cb => cb.value);
  if (checkedStudentFilters.length > 0) {
    filterSummary += 'Student filters: ' + checkedStudentFilters.join(', ') + '\n';
  }
  
  const checkedSchoolFilters = Array.from(document.querySelectorAll('#schoolFilters input[type="checkbox"]:checked'))
    .map(cb => cb.value);
  if (checkedSchoolFilters.length > 0) {
    filterSummary += 'School filters: ' + checkedSchoolFilters.join(', ') + '\n';
  }
  
  alert(filterSummary + '\nIn Salesforce, this would refresh all dashboard components with filtered data.');
}

function clearFilters() {
  // Clear all inputs
  document.getElementById('programFilter').value = 'all';
  document.getElementById('schoolFilter').value = '';
  document.getElementById('dateFilter').value = 'ytd';
  document.getElementById('grantFilter').value = 'all';
  document.getElementById('yearLevelFilter').value = 'all';
  document.getElementById('icseaFilter').value = 'all';
  document.getElementById('indigenousEnrollmentFilter').value = 'all';
  
  // Clear domain filters
  activeDomains.clear();
  document.querySelectorAll('.domain-chip').forEach(chip => {
    chip.classList.remove('active');
    chip.querySelector('input[type="checkbox"]').checked = false;
  });
  
  // Clear all checkboxes
  document.querySelectorAll('#studentFilters input[type="checkbox"], #schoolFilters input[type="checkbox"]')
    .forEach(cb => cb.checked = false);
  
  document.getElementById('filterStatus').textContent = 'Showing: All data, YTD 2025';
  alert('Filters cleared. Dashboard reset to default view.');
}

function savePreset() {
  const presetName = prompt('Enter a name for this filter preset:');
  if (presetName) {
    alert(`Preset "${presetName}" saved! In Salesforce, this would save your current filter configuration for quick access.`);
  }
}

function toggleBreakdown(breakdownId, toggleId) {
  const breakdown = document.getElementById(breakdownId);
  const toggle = document.getElementById(toggleId);
  if (breakdown.style.display === 'none') {
    breakdown.style.display = 'block';
    toggle.textContent = '‚ñ≤ Hide breakdown';
  } else {
    breakdown.style.display = 'none';
    toggle.textContent = '‚ñº View breakdown';
  }
}
</script>

</body>
</html>
